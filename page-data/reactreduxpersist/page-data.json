{"componentChunkName":"component---src-templates-post-template-tsx","path":"/reactreduxpersist/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>Redux-persist</h2>\n<p>redux 상태 관리 라이브러리를 많이 사용하실 것입니다.</p>\n<p>리덕스의 store는 페이지를 새로고침 할 경우 state가 날아가는 것을 보실 수 있습니다.</p>\n<p>이것에 대한 대응 방안으로 localStorage 또는 session에 저장하고자 하는 reducer state를 저장하여,</p>\n<p>새로고침 하여도 저장공간에 있는 데이터를 redux에 불러오는 형식으로 이루어집니다.</p>\n<p>위에서 말한 이 작동을 위해 redux-persist를 사용합니다.</p>\n<h2>설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> redux-persist</code></pre></div>\n<h2>reducer에 persist store 정의</h2>\n<ul>\n<li>\n<p>localStorage에 저장하고 싶으면 import storage from ‘redux-persist/lib/storage</p>\n</li>\n<li>\n<p>session Storage에 저장하고 싶으면 import storageSession from ‘redux-persist/lib/storage/session</p>\n</li>\n</ul>\n<p>localStorage 와 session Storage 차이점은 페이지를 닫았을때 localStorage는 저장소에 값을 가지고있으며</p>\n<p>session Storage 페이지를 닫았을떄 저장소에 값을 초기화합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// reducers/index.js</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> persistReducer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-persist'</span>\r\n<span class=\"token keyword\">import</span> storage <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-persist/lib/storage'</span>\r\n\r\n<span class=\"token keyword\">import</span> auth <span class=\"token keyword\">from</span> <span class=\"token string\">'./auth'</span>\r\n<span class=\"token keyword\">import</span> board <span class=\"token keyword\">from</span> <span class=\"token string\">'./board'</span>\r\n<span class=\"token keyword\">import</span> studio <span class=\"token keyword\">from</span> <span class=\"token string\">'./studio'</span>\r\n\r\n<span class=\"token keyword\">const</span> persistConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token comment\">// localStorage에 저장합니다.</span>\r\n  storage<span class=\"token punctuation\">,</span>\r\n  <span class=\"token comment\">// auth, board, studio 3개의 reducer 중에 auth reducer만 localstorage에 저장합니다.</span>\r\n  <span class=\"token literal-property property\">whitelist</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'auth'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token comment\">// blacklist -> 그것만 제외합니다</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> rootReducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  auth<span class=\"token punctuation\">,</span>\r\n  board<span class=\"token punctuation\">,</span>\r\n  studio<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">persistReducer</span><span class=\"token punctuation\">(</span>persistConfig<span class=\"token punctuation\">,</span> rootReducer<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>persist store 사용</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// src/index.js</span>\r\n\r\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> applyMiddleware<span class=\"token punctuation\">,</span> compose <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Provider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> persistStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-persist'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PersistGate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-persist/integration/react'</span>\r\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App'</span>\r\n<span class=\"token keyword\">import</span> configureStore <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> rootReducer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./reducers'</span>\r\n\r\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>rootReducer<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> persistor <span class=\"token operator\">=</span> <span class=\"token function\">persistStore</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Root</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token operator\">&lt;</span>Provider store<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span>PersistGate loading<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span> persistor<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>persistor<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>PersistGate<span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Provider<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">)</span>\r\n\r\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Root <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Redux-persist","summary":"Redux-persist란 무엇인가","date":"2022.07.19.","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz2NQwgWUlZWUlZVVVEAMJWWsShhw6VVUkFeQk1WUk1WQk1VSUCBas7KyooKChrGZgU+IhrGZoW+ouoGxIki/MlGaFWSkDXyCTcIT3LrmmkYk6bn5yEtLgt2PXzPIWnlNcyvLtGLnxkk2+TVOjZMsUgo0TMxBlqPqx6ZZXs7QL8w0KsWpcZJjba9jbZ9pVIqBd7CinBwhzTAjzBOybfJqHKq6bQvqzKJTlRQViA0wBTlZHQdX45AYq8xS45A4LWt7BVkZIvwMjShFFXUNTVMLBWkpTTNLZTV1JUVFUuJZUVFBTlZZWUVRVharTnyaQbGqrAJNajgAAIe0an5q22AbAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png","srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/387ef/reactthumbnail.png 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/22925/reactthumbnail.png 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/2fedb/reactthumbnail.webp 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/4fcbd/reactthumbnail.webp 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/0d4d1/reactthumbnail.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}},"publicURL":"/static/cba0b89d2bf2d96a1ed26edb5849f804/reactthumbnail.png"}}}}]}},"pageContext":{"slug":"/reactreduxpersist/"}},"staticQueryHashes":[]}