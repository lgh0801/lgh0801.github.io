{"componentChunkName":"component---src-templates-post-template-tsx","path":"/react18/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>React 18</h2>\n<p>React v18.0이 정식 릴리즈가 되었습니다.</p>\n<p>아래에서 업데이트된 React v18 주요 기능들을 알아보겠습니다.</p>\n<h2>Automatic Batching (자동 배칭)</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>flag<span class=\"token punctuation\">,</span> setFlag<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 아직 리렌더링 되지 않습니다.</span>\r\n    <span class=\"token function\">setFlag</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">flag</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>flag<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 아직 리렌더링 되지 않습니다.</span>\r\n    <span class=\"token comment\">// 리액트는 오직 마지막에만 리렌더링을 한 번 수행합니다. (배치 적용)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Next<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>h1 style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> flag <span class=\"token operator\">?</span> <span class=\"token string\">'blue'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React는 배치를 수행해서 두 번의 setState를 한 번의 리렌더링으로</p>\n<p>처리하며 효율성과 안정성을 보장합니다.</p>\n<h4>flushSync</h4>\n<p>만약, 자동 배칭을 원하지 않는다면, flushSync() 로</p>\n<p>setter 함수를 감싸 별도의 리렌더링을 유발하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> flushSync <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">flushSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 리액트는 즉시 DOM을 업데이트합니다.</span>\r\n\r\n  <span class=\"token function\">flushSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setFlag</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>f<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 리액트는 즉시 DOM을 업데이트합니다.</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Concurrent Features (동시성 기능)</h2>\n<p>동시성 기능은 React가 추진하고 있는 차기 핵심 기능입니다.</p>\n<p>Javascript는 싱글 스레드(single-threaded) 언어로 하나의 코드가 끝나야 다음 코드가 실행됩니다.</p>\n<p>React 역시 같은 원리로 동작하며, 특히 UI 렌더링 도중에는 다른 작업이 진행되지 않기 때문에</p>\n<p>DOM Tree가 거대한 경우 조작과 표현의 간극이 발생할 수 있습니다.</p>\n<p>동시성 기능은 이러한 큰 작업을 작은 여러개의 독립적인 작업으로 나누는 프로그래밍 구조로,</p>\n<p>싱글 스레드의 단점을 보완하는 솔루션입니다.</p>\n<p>동시성 기능을 이해하기 위해, 먼저 2가지 상태 업데이트의 분류를 이해해야 합니다.</p>\n<ul>\n<li>\n<p>긴급 업데이트: 직접적인 상호작용 반영 (타이핑, 호버, 스크롤) 업데이트가 즉각적인 대상</p>\n</li>\n<li>\n<p>전환 업데이트: 하나의 뷰에서 다른 뷰로 UI 전환. 상태값 변화 모든 업데이트가 뷰에 즉시 반영되지 않아도 됨.</p>\n</li>\n</ul>\n<p>예를들면 검색창이 좋은 예시입니다.</p>\n<p>input 필드의 경우, 키 입력이 올바르게 된 것을 즉각적으로</p>\n<p>보여줘야 하는 긴급 업데이트 영역입니다..</p>\n<p>반면, 하단 자동완성 리스트는 입력값에 따라 내용이 뒤늦게 바뀌어도</p>\n<p>되는 전환 업데이트 영역입니다.</p>\n<p>기존에는 전환 업데이트를 setTimeout같은 함수로 우회하였지만</p>\n<p>React 18부터는 이를 지원하는 Hooks등을 제공함으로써</p>\n<p>전환 업데이트를 명시적으로 구분하여 상태 업데이트를 할 수 있습니다.</p>\n<ul>\n<li>\n<p>startTransition: 상태 업데이트를 전환 업데이트로 반영하는 메서드</p>\n</li>\n<li>\n<p>useTransition: 전환 업데이트를 지원하며, startTransition() Hooks와 더불어 트랜지션 상태를 지원</p>\n</li>\n<li>\n<p>useDeferredValue: 렌더링 우선순위가 낮은 상태값의 업데이트를 지연시키는 메서드</p>\n</li>\n</ul>\n<h2>서스펜스(Suspense)를 지원하는 새로운 서버 사이드 렌더링 아키텍처</h2>\n<p>React18에서는 새로운 서버 사이드 렌더링(이하 SSR) 아키텍처가 적용되었다.</p>\n<p>새롭게 pipeToNodeWritable API가 추가 되었고,</p>\n<p>이 API를 사용하면 SSR을 통해 <Suspense>를 사용할 수 있게 되었습니다.</p>\n<p>React.lazy는 동적 import를 통해 컴포넌트를 렌더링하며,</p>\n<p>이를 lazy 컴포넌트 라고 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> lazy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n\r\n<span class=\"token keyword\">const</span> Comments <span class=\"token operator\">=</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Comments.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token operator\">&lt;</span>Suspense fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>Spinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n  <span class=\"token operator\">&lt;</span>Comments <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Suspense<span class=\"token operator\">></span></code></pre></div>\n<p>서버단에서 HTML 스트리밍을 담당하는 기존의 renderToString() 대신,</p>\n<p>pipeToNodeWritable API가 React 18에 새롭게 추가됩니다.</p>\n<p>React 18부터는 새로운 렌더링 API인 pipeToNodeWritable 덕분에,</p>\n<p><Suspense>와 함께 lazy 컴포넌트를 사욯할 수 있게 되어 앱을</p>\n<p>현재 리액트 생태계의 주류 환경인 웹팩 기반의 애플리케이션에서,</p>\n<p>lazy 컴포넌트를 사용하면 코드 스플리팅(Code Splitting)이 적용되어</p>\n<p>별도의 자바스크립트 Chunk 파일로 분리됩니다.</p>","frontmatter":{"title":"React18","summary":"달라진 주요 기능","date":"2022.05.11.","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz2NQwgWUlZWUlZVVVEAMJWWsShhw6VVUkFeQk1WUk1WQk1VSUCBas7KyooKChrGZgU+IhrGZoW+ouoGxIki/MlGaFWSkDXyCTcIT3LrmmkYk6bn5yEtLgt2PXzPIWnlNcyvLtGLnxkk2+TVOjZMsUgo0TMxBlqPqx6ZZXs7QL8w0KsWpcZJjba9jbZ9pVIqBd7CinBwhzTAjzBOybfJqHKq6bQvqzKJTlRQViA0wBTlZHQdX45AYq8xS45A4LWt7BVkZIvwMjShFFXUNTVMLBWkpTTNLZTV1JUVFUuJZUVFBTlZZWUVRVharTnyaQbGqrAJNajgAAIe0an5q22AbAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png","srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/387ef/reactthumbnail.png 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/22925/reactthumbnail.png 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/2fedb/reactthumbnail.webp 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/4fcbd/reactthumbnail.webp 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/0d4d1/reactthumbnail.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}},"publicURL":"/static/cba0b89d2bf2d96a1ed26edb5849f804/reactthumbnail.png"}}}}]}},"pageContext":{"slug":"/react18/"}},"staticQueryHashes":[]}