{"componentChunkName":"component---src-templates-post-template-tsx","path":"/fetch&axios/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>fetch란?</h1>\n<p>ES6부터 들어온 JavaScript 내장 라이브러리입니다.</p>\n<p>Promise 기반으로 만들어졌기 때문에 axios와 마찬가지로 데이터 다루기가 쉽고,</p>\n<p>내장 라이브러리라는 장점으로 상당히 편리합니다.</p>\n<h2>장점</h2>\n<ul>\n<li>\n<p>자바스크립트의 내장 라이브러리 이므로 별도로 import 할 필요가 없습니다.</p>\n</li>\n<li>\n<p>Promise 기반으로 만들어졌기 때문에 데이터 다루기 편리합니다.</p>\n</li>\n<li>\n<p>내장 라이브러리이기 때문에 업데이트에 따른 에러 방지가 가능합니다.</p>\n</li>\n</ul>\n<h2>단점</h2>\n<ul>\n<li>\n<p>네트워크 에러 발생 시 response timeout이 없어 기다려야 합니다.</p>\n</li>\n<li>\n<p>JSON으로 변환해주는 과정 필요합니다.</p>\n</li>\n<li>\n<p>상대적으로 axios에 비해 기능이 부족합니다.</p>\n</li>\n<li>\n<p>지원하지 않는 브라우저가 존재합니다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://localhost:3000/user/post'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'lgh123'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>axios란?</h1>\n<p>axios는 Node.js와 브라우저를 위한 Promise API를 활용하는 HTTP 통신 라이브러리입니다.</p>\n<p>비동기로 HTTP 통신을 할 수 있으며 return을 promise 객체로 해주기 때문에</p>\n<p>response 데이터를 다루기 쉽습니다.</p>\n<h2>장점</h2>\n<ul>\n<li>\n<p>response timeout (fetch에는 없는 기능) 처리 방법이 존재합니다.</p>\n</li>\n<li>\n<p>Promise 기반으로 만들어졌기 때문에 데이터 다루기 편리합니다.</p>\n</li>\n<li>\n<p>fetch처럼 JSON.stringify과정이 필요없습니다.</p>\n</li>\n<li>\n<p>브라우저 호환성이 뛰어납니다.</p>\n</li>\n</ul>\n<h2>단점</h2>\n<ul>\n<li>사용을 위해 모듈 설치가 필요합니다. (npm install axios)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// then 을 연속적으로 호출하는 예시</span>\r\n<span class=\"token keyword\">const</span> TestApiCall <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://test.com/api/v1'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> userId <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">;</span>\r\n      axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://test2.com/api/v2/'</span> <span class=\"token operator\">+</span> userId<span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Response >>\"</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error >>\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>axios를 이용하여 API호출을 하는 경우 바로 응답이 오지 않기에 일반적으로 비동기 방식을 사용합니다.</p>\n<p>axios 문서에서도 기본적으로 소개하는 사용방식은 Promise-then 방식의</p>\n<p>비동기 호출방식을 소개하고 있습니다.</p>\n<p>다만 then 방식의 경우도 api 호출이 복잡해지면 then을</p>\n<p>then 내부에서건 또는 chain 형태로 연달아서 쓰는 경우는 발생합니다.</p>\n<p>위와 같은 형태는 예시입니다. 다만 위와 같이 보기에 복잡(불편) 할 수 있는 코드가 나타날 수 있고,</p>\n<p>js에서도 async/await 를 이용한 비동기 구문이 추가 되었기에 axios도 이를 지원하고 있습니다.</p>\n<p>아래는 async/await 구문을 이용한 방식의 코드입니다.</p>\n<p>다만 해당 구문에서는 에러처리를 try-catch 방식을 이용해서 작업해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// async/await 를 활용하는 수정된 방식</span>\r\n<span class=\"token keyword\">const</span> TestApiCall <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://test.com/api/v1'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">const</span> userId <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> response2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://test2.com/api/v2/'</span> <span class=\"token operator\">+</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"response >>\"</span><span class=\"token punctuation\">,</span> response2<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error >>\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>마치면서</h1>\n<p>장단점을 잘 비교해보고 사용해보시면 될 것 같습니다.</p>\n<p>저는 Axios 사용이 좀 더 눈에 잘 들어오고 편했습니다.</p>","frontmatter":{"title":"fetch vs axios","summary":"http통신 비교하기","date":"2022.06.01.","categories":["Network"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQY043QMYuDQBQEYP+9dZr8DlMI6YJikULBrIq4i0RXfa5arArCiq4vnIFr775+BmYMrbU6aa3xL/u+J0nCGKOUNk1jEELCMGSM3W63uq4R8duybds8z+M4KqWWZSGEMMaUUrZtU0o553EcG8/nEwC6rns8Hq/XS0o5TZOUknPetm1VVeI0DIMQou97y7Icx/E8z/d9IwiCy+Vimub1enVdlzFWliXnXAgBAGVZ9n3fdd04jt/e+/2eZdn7/Y6iyEDEoijCMCSEwClNUwDQWq/rup1+N2utkyShlOZ5DgA/4Xme0zSVUiLicRz/+axpGkT8AO9hRVTCe+j3AAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/66ca892a64251ca19f320db11a3a364b/b4f2c/fetch%26axiosthumbnail.png","srcSet":"/static/66ca892a64251ca19f320db11a3a364b/3f1b4/fetch%26axiosthumbnail.png 342w,\n/static/66ca892a64251ca19f320db11a3a364b/84f80/fetch%26axiosthumbnail.png 683w,\n/static/66ca892a64251ca19f320db11a3a364b/b4f2c/fetch%26axiosthumbnail.png 1366w","sizes":"(min-width: 1366px) 1366px, 100vw"},"sources":[{"srcSet":"/static/66ca892a64251ca19f320db11a3a364b/a7a29/fetch%26axiosthumbnail.webp 342w,\n/static/66ca892a64251ca19f320db11a3a364b/1c73c/fetch%26axiosthumbnail.webp 683w,\n/static/66ca892a64251ca19f320db11a3a364b/69e7e/fetch%26axiosthumbnail.webp 1366w","type":"image/webp","sizes":"(min-width: 1366px) 1366px, 100vw"}]},"width":1366,"height":426}},"publicURL":"/static/66ca892a64251ca19f320db11a3a364b/fetch&axiosthumbnail.png"}}}}]}},"pageContext":{"slug":"/fetch&axios/"}},"staticQueryHashes":[]}