{"componentChunkName":"component---src-templates-post-template-tsx","path":"/reactcomment/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>댓글/답글</h2>\n<p>몇일전에 유튜브 클론 강의를 보고 댓글/답글기능이 있었습니다.</p>\n<p>그 기능을 보고 ToyProject에도 댓글/답글기능을 넣어보고싶어서</p>\n<p>유튜브 클론 강의를 참고 하면서 비슷하게 구현하고</p>\n<p>수정, 삭제, 날짜표시, 사용자 권한등을 더 추가해서 완성했습니다.</p>\n<p>우선 이기능을 구현하기 위해서 3개의 컴포넌트를 만들었습니다.</p>\n<p>아래 소스코드를 보겠습니다.</p>\n<p>일단 첫번째로는 댓글 목록들을 보여주고</p>\n<p>댓글을 입력할수있는 화면을 가지고있는 컴포넌트 CommentInput</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//CommentInput.js</span>\r\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\r\n<span class=\"token keyword\">import</span> CommentList <span class=\"token keyword\">from</span> <span class=\"token string\">'./CommentList'</span>\r\n<span class=\"token keyword\">import</span> ReplyComment <span class=\"token keyword\">from</span> <span class=\"token string\">'./ReplyComment'</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CommentInput</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>commentValue<span class=\"token punctuation\">,</span> setComment<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">,</span> Setlist<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>refrehlist<span class=\"token punctuation\">,</span> setrefrehlist<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>write<span class=\"token punctuation\">,</span> setWrite<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//글쓰기 화면인지 일반 화면인지 비교를 위해</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setComment</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSubmit</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// a태그나 Submit태그는 누르게 되면 href를 통해 이동하거나, 창이 새로고침되는데 이러한 동작을 막아줄 수 있습니다.</span>\r\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    axios\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/comment?type=save'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_UserId</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_Username</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_Comment</span><span class=\"token operator\">:</span> commentValue<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_ResponseTo</span><span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//부모 ResponseTo만 'root'저장</span>\r\n        <span class=\"token literal-property property\">is_idnum</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token function\">setComment</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n          axios\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/comment?is_Swtcode=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 리스트 조회</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">setrefrehlist</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">)</span>\r\n                axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/Swtool?type=modifycomment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token comment\">//게시판 목록에서 보이는 댓글 개수 저장</span>\r\n                  <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n                  <span class=\"token literal-property property\">is_CommentCnt</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\r\n      window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">'/View/free/register/'</span> <span class=\"token operator\">||</span>\r\n      window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">'/View/coding/register/'</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setWrite</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>write<span class=\"token punctuation\">)</span> <span class=\"token comment\">//글쓰기 화면이면 true</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      axios\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/comment?is_Swtcode=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 리스트 조회</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">Setlist</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">)</span>\r\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>refrehlist<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token comment\">//댓글,답글 값들이 변할때마다 최신화</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refreshFunction</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">newComment</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setrefrehlist</span><span class=\"token punctuation\">(</span>newComment<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>write <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>댓글<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>hr <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">{</span>list <span class=\"token operator\">&amp;&amp;</span>\r\n            list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\r\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\">comment<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n                <span class=\"token operator\">!</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">RESPONSETO</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span> <span class=\"token comment\">//답글(RESPONSETO값이있는)은 초기화면 리스트에서 안나오게 댓글만 나오게</span>\r\n                  <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>CommentList\r\n                      refreshFunction<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>refreshFunction<span class=\"token punctuation\">}</span>\r\n                      comment<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">}</span>\r\n                      swt_code<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">}</span>\r\n                      userid<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">}</span>\r\n                      username<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                    <span class=\"token operator\">&lt;</span>ReplyComment\r\n                      refreshFunction<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>refreshFunction<span class=\"token punctuation\">}</span>\r\n                      commentLists<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>list<span class=\"token punctuation\">}</span>\r\n                      swt_code<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">}</span>\r\n                      parentCommentId<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">ID_NUM</span><span class=\"token punctuation\">}</span>\r\n                      userid<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">}</span>\r\n                      username<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span>\r\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n                  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span>form style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onSubmit<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>textarea\r\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>commentValue<span class=\"token punctuation\">}</span>\r\n              placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"댓글을 작성해 주세요...\"</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>button\r\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'20%'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'62px'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">borderStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'groove'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n              onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onSubmit<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n              등록\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>CommentInput<span class=\"token punctuation\">)</span></code></pre></div>\n<p>댓글 리스트들을 map()를 이용하여 뿌려주고</p>\n<p>댓글,답글 컴포넌트에 필요한 prop값을 넘겨줍니다.</p>\n<p>답글은 보이지 않고 댓글만 보이는 리스트를 보여주고</p>\n<p>ReplyComment 컴포넌트에는 부모ID값을 넣어줍니다.</p>\n<p>CommentList 컴포넌트에는 답글을 작성할때 해당 id값을</p>\n<p>responseto에 넣어줄겁니다.</p>\n<p>이유는 responseto랑 부모ID가 같은경우만</p>\n<p>해당 답글을 뿌려주기 위해서입니다.</p>\n<p>responseto는 아래 CommentList 소스에서 보겠습니다</p>\n<p>소스가 길어서 아래에서 간략하게 설명하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//CommentList.js</span>\r\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span>\r\n<span class=\"token keyword\">import</span> Swal <span class=\"token keyword\">from</span> <span class=\"token string\">'sweetalert2'</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CommentList</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>OpenReply<span class=\"token punctuation\">,</span> setOpenReply<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//답글달기 bool</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>commentValue<span class=\"token punctuation\">,</span> setCommentvaule<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//답글달기 값</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>commentmodifyValue<span class=\"token punctuation\">,</span> setcommentmodifyValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>\r\n    props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">COMMENTTEXT</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//답글 수정시 값</span>\r\n  <span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>MyselfCheck<span class=\"token punctuation\">,</span> setMyselfCheck<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 삭제,수정 유저 권한 bool</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>ModiftyCheck<span class=\"token punctuation\">,</span> setModiftyCheck<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 수정 전,후 화면 bool</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickReplyOpen</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setOpenReply</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>OpenReply<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onHandleChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setCommentvaule</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onHandlemodifyChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setcommentmodifyValue</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token operator\">&lt;</span>span onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onClickReplyOpen<span class=\"token punctuation\">}</span> key<span class=\"token operator\">=</span><span class=\"token string\">\"comment-basic-reply-to\"</span><span class=\"token operator\">></span>\r\n      답글달기\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">]</span>\r\n\r\n  <span class=\"token comment\">//답글 저장</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSubmit</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n    axios\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/comment?type=save'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_UserId</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_Username</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_Comment</span><span class=\"token operator\">:</span> commentValue<span class=\"token punctuation\">,</span>\r\n        <span class=\"token literal-property property\">is_ResponseTo</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">ID_NUM</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//부모 댓글에서 고유ID값을 가져옴</span>\r\n        <span class=\"token literal-property property\">is_idnum</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token function\">setCommentvaule</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token function\">setOpenReply</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n          axios\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/comment?is_Swtcode=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 리스트 조회</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n                props<span class=\"token punctuation\">.</span><span class=\"token function\">refreshFunction</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">)</span>\r\n                axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/Swtool?type=modifycomment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token comment\">//게시판 목록에서 댓글 몇개인지....</span>\r\n                  <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n                  <span class=\"token literal-property property\">is_CommentCnt</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">//댓글 수정</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onModify</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'cancel'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setModiftyCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ModiftyCheck<span class=\"token punctuation\">)</span>\r\n      <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token function\">setcommentmodifyValue</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">COMMENTTEXT</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n      axios\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/comment?type=modify'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">is_idnum</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">ID_NUM</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">is_UserId</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">USERID</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">is_Comment</span><span class=\"token operator\">:</span> commentmodifyValue<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n            axios\r\n              <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/comment?is_Swtcode=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 리스트 조회</span>\r\n              <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n                  props<span class=\"token punctuation\">.</span><span class=\"token function\">refreshFunction</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">)</span>\r\n                  <span class=\"token function\">setModiftyCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ModiftyCheck<span class=\"token punctuation\">)</span>\r\n                  <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">}</span>\r\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">//댓글 주인</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">USERID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>MyselfCheck<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>userid <span class=\"token operator\">===</span> <span class=\"token string\">'root@naver.com'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">//관리자</span>\r\n      <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>MyselfCheck<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">//다른 사람</span>\r\n      <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token comment\">//댓글 삭제</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">commentdelete</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> datalength\r\n    <span class=\"token function\">deletealert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'해당 댓글을 삭제하시겠습니까?'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      axios\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/comment?type=delete'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">is_Idnum</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">ID_NUM</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          axios\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/comment?is_Swtcode=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//댓글 리스트 조회</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n                props<span class=\"token punctuation\">.</span><span class=\"token function\">refreshFunction</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">)</span>\r\n                response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span>\r\n                  <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>datalength <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\r\n                  <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>datalength <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\r\n                axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/Swtool?type=modifycomment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token comment\">//게시판 목록에서 댓글 몇개인지....</span>\r\n                  <span class=\"token literal-property property\">is_Swtcode</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">,</span>\r\n                  <span class=\"token literal-property property\">is_CommentCnt</span><span class=\"token operator\">:</span> datalength<span class=\"token punctuation\">,</span>\r\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'작업중 오류가 발생하였습니다.'</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deletealert</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> callbackFunc</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    Swal<span class=\"token punctuation\">.</span><span class=\"token function\">fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span>\r\n      <span class=\"token comment\">//position : 'center', //생략가능</span>\r\n      <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> <span class=\"token string\">'question'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">showCancelButton</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token comment\">//showConfirmButton : true, //생략가능</span>\r\n      <span class=\"token literal-property property\">confirmButtonColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#4B088A'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">cancelButtonColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'01DF01'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">confirmButtonText</span><span class=\"token operator\">:</span> <span class=\"token string\">'예'</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">cancelButtonText</span><span class=\"token operator\">:</span> <span class=\"token string\">'아니요'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        Swal<span class=\"token punctuation\">.</span><span class=\"token function\">fire</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Deleted!'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'삭제되었습니다.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\r\n      <span class=\"token punctuation\">}</span>\r\n      <span class=\"token function\">callbackFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">//댓글 수정</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">commentmodify</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setModiftyCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ModiftyCheck<span class=\"token punctuation\">)</span>\r\n    <span class=\"token function\">setMyselfCheck</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> year <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">REG_DATE</span><span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> month <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">REG_DATE</span><span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> day <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">REG_DATE</span><span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> reg_date <span class=\"token operator\">=</span> year <span class=\"token operator\">+</span> <span class=\"token string\">'.'</span> <span class=\"token operator\">+</span> month <span class=\"token operator\">+</span> <span class=\"token string\">'.'</span> <span class=\"token operator\">+</span> day\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>ul className<span class=\"token operator\">=</span><span class=\"token string\">\"commentwrapper\"</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">{</span>ModiftyCheck <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">\"commentuser\"</span><span class=\"token operator\">></span>\r\n              <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">USERNAME</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">{</span>reg_date<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">\"commenttext\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">COMMENTTEXT</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">\"commentreply\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>actions<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>ModiftyCheck <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span>form style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onModify<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>textarea\r\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n              onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onHandlemodifyChange<span class=\"token punctuation\">}</span>\r\n              value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>commentmodifyValue<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>button\r\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'20%'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'62px'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">borderStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'groove'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n              onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">onModify</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> <span class=\"token string\">'modify'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n              수정\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>button\r\n              style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n                <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'20%'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'62px'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">borderStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'groove'</span><span class=\"token punctuation\">,</span>\r\n                <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n              onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">onModify</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> <span class=\"token string\">'cancel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">></span>\r\n              취소\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">{</span>MyselfCheck <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">\"commentdelete\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>commentdelete<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n              삭제\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token string\">\"commentmodify\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>commentmodify<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n              수정\r\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\r\n\r\n      <span class=\"token punctuation\">{</span>OpenReply <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>form style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onSubmit<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>textarea\r\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onHandleChange<span class=\"token punctuation\">}</span>\r\n            value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>commentValue<span class=\"token punctuation\">}</span>\r\n            placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"답글을 작성해 주세요...\"</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>button\r\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'20%'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'62px'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">borderStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'groove'</span><span class=\"token punctuation\">,</span>\r\n              <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onSubmit<span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">></span>\r\n            등록\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>CommentList<span class=\"token punctuation\">)</span></code></pre></div>\n<p>CommentList에서는 답글을 작성할수있습니다.</p>\n<p>onSubmit 저장 코드에서 is_ResponseTo: props.comment.ID_NUM 값을 DB에 저장해서</p>\n<p>부모 ID_NUM과 자식 is_ResponseTo를 비교해서 답글을 나타내는겁니다.</p>\n<p>그리고 MyselfCheck bool여부로 사용자 권한에 따라서</p>\n<p>수정/삭제 여부를 표현했습니다.</p>\n<p>ModiftyCheck bool여부로 일반 댓글/답글 화면과 수정화면을 분리하였습니다.</p>\n<p>수정/삭제시 props.refreshFunction(response.data.json)</p>\n<p>prop에서 가져온 함수를 이용하여 댓글목록을 최신화 시켰습니다.</p>\n<p>이제 마지막 소스는 댓글에 달린 답글을 누르면 해당 답글들을 뿌려주는 컴포넌트입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//ReplyComment.js</span>\r\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> CommentList <span class=\"token keyword\">from</span> <span class=\"token string\">'./CommentList'</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ReplyComment</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>ChildCommentNum<span class=\"token punctuation\">,</span> setChildCommentNum<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//답글 개수</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>OpenReplyComments<span class=\"token punctuation\">,</span> setOpenReplyComments<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//답글open</span>\r\n\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> commentNumber <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">//답글 개수 초기값 0</span>\r\n\r\n    props<span class=\"token punctuation\">.</span>commentLists<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">comment</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">RESPONSETO</span> <span class=\"token operator\">===</span> props<span class=\"token punctuation\">.</span>parentCommentId<span class=\"token punctuation\">)</span> commentNumber<span class=\"token operator\">++</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token function\">setChildCommentNum</span><span class=\"token punctuation\">(</span>commentNumber<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>commentLists<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderReplyComment</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">parentCommentId</span> <span class=\"token operator\">=></span>\r\n    props<span class=\"token punctuation\">.</span>commentLists<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">comment<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">RESPONSETO</span> <span class=\"token operator\">===</span> parentCommentId <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span> <span class=\"token comment\">//자식ID랑 부모ID가 같은경우만 답글 뿌려주기 / 답글도 댓글 처럼 똑같이 계속 반복(답글에 답글달기)</span>\r\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'97%'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">marginLeft</span><span class=\"token operator\">:</span> <span class=\"token string\">'40px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>CommentList\r\n              refreshFunction<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>refreshFunction<span class=\"token punctuation\">}</span>\r\n              comment<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">}</span>\r\n              swt_code<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">}</span>\r\n              userid<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">}</span>\r\n              username<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n            <span class=\"token operator\">&lt;</span>ReplyComment\r\n              refreshFunction<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>refreshFunction<span class=\"token punctuation\">}</span>\r\n              commentLists<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>commentLists<span class=\"token punctuation\">}</span>\r\n              swt_code<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>swt_code<span class=\"token punctuation\">}</span>\r\n              parentCommentId<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">.</span><span class=\"token constant\">ID_NUM</span><span class=\"token punctuation\">}</span>\r\n              userid<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>userid<span class=\"token punctuation\">}</span>\r\n              username<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span>\r\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onHandleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setOpenReplyComments</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>OpenReplyComments<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">{</span>ChildCommentNum <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\r\n        <span class=\"token operator\">&lt;</span>p\r\n          style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'14px'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onHandleChange<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">></span>\r\n          답글 <span class=\"token punctuation\">{</span>ChildCommentNum<span class=\"token punctuation\">}</span> 개\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">{</span>OpenReplyComments <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">renderReplyComment</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>parentCommentId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>ReplyComment<span class=\"token punctuation\">)</span></code></pre></div>\n<p>댓글에 답글 갯수를 보여주고 클릭하면 답글을 보여주는 컴포넌트입니다.</p>\n<p>CommentInput에서 받아서 props를 이용하여</p>\n<p>답글에 responseto값과 부모 댓글 id값이 같은경우 답글 갯수도 세고</p>\n<p>답글 갯수를 누르면 해당 로직을 타서 답글들을 뿌려주는겁니다.</p>\n<p>답글은 차이를 주기위해 style를 보면 좀더 오른쪽으로 빠집니다.</p>\n<p>댓글/답글 기능을 완료했습니다.</p>\n<p>react로 댓글을 구현하는것은 처음이라서 저한테는 좋은 경험이 됐습니다.</p>\n<h2><img src=\"/0b0955363cb8e82317ec0bdfe7bbd484/redux.png\" alt=\"file:///C:/Reactblog/LEEBLOG/static/react/redux.PNG\"></h2>","frontmatter":{"title":"댓글/답글 기능 구현","summary":"ToyProject에서 댓글/답글 기능을 넣어보자","date":"2022.03.22.","categories":["React","ToyProject"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz2NQwgWUlZWUlZVVVEAMJWWsShhw6VVUkFeQk1WUk1WQk1VSUCBas7KyooKChrGZgU+IhrGZoW+ouoGxIki/MlGaFWSkDXyCTcIT3LrmmkYk6bn5yEtLgt2PXzPIWnlNcyvLtGLnxkk2+TVOjZMsUgo0TMxBlqPqx6ZZXs7QL8w0KsWpcZJjba9jbZ9pVIqBd7CinBwhzTAjzBOybfJqHKq6bQvqzKJTlRQViA0wBTlZHQdX45AYq8xS45A4LWt7BVkZIvwMjShFFXUNTVMLBWkpTTNLZTV1JUVFUuJZUVFBTlZZWUVRVharTnyaQbGqrAJNajgAAIe0an5q22AbAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png","srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/387ef/reactthumbnail.png 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/22925/reactthumbnail.png 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/07887/reactthumbnail.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/cba0b89d2bf2d96a1ed26edb5849f804/2fedb/reactthumbnail.webp 300w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/4fcbd/reactthumbnail.webp 600w,\n/static/cba0b89d2bf2d96a1ed26edb5849f804/0d4d1/reactthumbnail.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}},"publicURL":"/static/cba0b89d2bf2d96a1ed26edb5849f804/reactthumbnail.png"}}}}]}},"pageContext":{"slug":"/reactcomment/"}},"staticQueryHashes":[]}